# HTTPDNS

HTTPDNS使用HTTP协议进行域名解析，代替现有基于UDP的DNS协议，域名解析请求直接发送到阿里云的HTTPDNS服务器，从而绕过运营商的Local DNS，能够避免Local DNS造成的域名劫持问题和调度不精准问题。

HTTPDNS是一款递归DNS服务，与权威DNS不同，HTTPDNS并不具备决定解析结果的能力，而是主要负责解析过程的实现。

传统的DNS系统存在很多问题，最常见的就是DNS劫持、平均访问延迟较高、用户连接失败率较高这三个问题。其中最重要的是DNS劫持，因为DNS解析是交给运营商来做的，所以解析结果被运营商劫持插入广告，解析结果不按 TTL 缓存，解析被错误递归（跨地区甚至跨运营商）等问题导致我们不得不去寻找一种可以绕开运营商的办法来做【域名->IP】的映射方式，那就是HttpDNS。



HttpDNS是通过ip直接请求http获取服务器A记录地址，不存在向本地运营商询问domain解析过程，所以从根本避免了劫持问题。同时由于是ip直接访问省掉了一次domain解析过程，可以在一定程度上降低平均访问延迟。HttpDNS和LocalDNS最大的区别在与：前者使用HTTP协议进行域名解析；后者协议运行在UDP协议之上，使用端口号53。



## 解决的问题

使用HttpDns，可以有效解决传统DNS的DNS劫持、访问时间延迟等问题。

- **Local DNS 劫持**：由于 HttpDns 是通过 IP 直接请求 HTTP 获取服务器 A 记录地址，不存在向本地运营商询问 domain 解析过程，所以从根本避免了劫持问题。
- **平均访问延迟下降**：由于是 IP 直接访问省掉了一次 domain 解析过程，通过智能算法排序后找到最快节点进行访问。
- **用户连接失败率下降**：通过算法降低以往失败率过高的服务器排序，通过时间近期访问过的数据提高服务器排序，通过历史访问成功记录提高服务器排序。



## Reference

[HTTPDNS深度解析](https://segmentfault.com/a/1190000021588066)